#!/bin/sh
usage='Usage: sed <dir> <find> <replace>'
if test ! -d $1
then
	echo $usage
	echo '$1 is not a directory'
	return 1
fi
if test ! $3
then
 	echo $usage
	return 1
fi
if test $(uname -s) = 'Linux'
then
	grep --color=always "$2" $(find "$1" -type f) | sed -n "s|$2|$3|gp"
	echo "Replace $2 with $3 (Y/n)"
	read -r ok
	case $ok in
		Y*);;
		*)
			return
	esac
	find "$1" -type f -exec sed -i "s|$2|$3|g" {} \;
	echo "Replaced $2 with $3"
	gw $3 $(find "$1" -type f)
else
	echo 'sed -i is not available!'
fi
