#!/bin/sh
if [ $(uname) = 'Linux' ]; then
	# the C program from ~/.zsh/fzfvim-cleanup.c uses /proc/[pid] which depends on Linux
	fzfvim-cleanup-bin
else
	tmpdir=$__GLOBAL_FZFVIM__
	if [ ! "$__GLOBAL_FZFVIM__" ] || ! cd "$tmpdir"; then
		echo "$tmpdir dir not found"
		exit 1
	fi
	pids=$(ps -o pid=)
	for file in $(echo __*__*); do
		case $pids in
		*"${file##*__}"*) ;;
		*) rm -f "$file" ;;
		esac
	done
fi
