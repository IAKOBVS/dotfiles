#!/bin/sh
HEADPHONE=bluez_sink.84_0F_2A_39_8E_E0.a2dp_sink
SPEAKER=alsa_output.pci-0000_00_1f.3.analog-stereo
LAST_SPEAKER=/tmp/.last_speaker_volume
LAST_HEADPHONE=/tmp/.last_headphone_volume
case "$(pactl get-default-sink)" in
*alsa*) # is speaker
	echo "$(pamixer --get-volume)%" > "$LAST_SPEAKER" 
	pactl set-sink-mute $SPEAKER 1
	pactl set-sink-volume $SPEAKER 0

	pactl set-sink-mute $HEADPHONE 0
	pactl set-default-sink $HEADPHONE
	if test /tmp/__james_headphone_volume__; then
		pactl set-sink-volume $HEADPHONE "$(cat $LAST_HEADPHONE)"
	fi

	notify-send "ðŸŽ§ now using headphones!"
	# pulseaudio-equalizer disable
	;;
*)	# is headphone
	echo "$(pamixer --get-volume)%" > $LAST_HEADPHONE
	pactl set-sink-mute $HEADPHONE 1
	pactl set-sink-volume $HEADPHONE 0

	pactl set-sink-mute $SPEAKER 0
	pactl set-default-sink $SPEAKER
	pactl set-sink-volume $SPEAKER "$(cat $LAST_SPEAKER)"

	notify-send "ðŸ”Š now using speakers!"
	# pulseaudio-equalizer disable
	;;
esac
